/*!
 * NevWare21 - ts-async, 0.5.0
 * https://github.com/nevware21/ts-async
 * Copyright (c) NevWare21 and contributors. All rights reserved.
 * Licensed under the MIT license.
 */
function t(t){"use strict";var a=void 0,l=null,b="",S="function",q="object",f="prototype",F="__proto__",e="undefined",J="constructor",W="Symbol",H="_polyfill",L="length",U="name",s="call",B="toString",n=Object,G=n[f],K=String,M=(je=Array)[f],v=M.slice;function A(t,e){try{return{v:t.apply(this,e)}}catch(t){return{e:t}}}function Q(e){return function(t){return typeof t===e}}function j(t){return typeof t===e||t===e}function V(t){return!!t||t!==a}var R=Q(S);function X(t){return(t||t!==l&&!j(t))&&t&&typeof t===q}var d=je.isArray,Y=Q("number");function I(t){return t&&t.then&&R(t.then)}var Z=n.getOwnPropertyDescriptor,tt=n.hasOwn||function(t,e){return!!t&&G.hasOwnProperty[s](t,e)||!!Z(t,e)};function et(t,e,n){if(t&&X(t))for(var r in t)if(tt(t,r)&&-1===e[s](n||t,r,t[r]))break}function T(t){throw new TypeError(t)}var nt=n.freeze;function rt(t){return nt&&et(t,function(t,e){(d(e)||X(e))&&nt(e)}),ot(t)}var ot=nt||function(t){return t},it=n.getPrototypeOf||function(t){return t[F]||l};function ut(t){return e=rt,n={},et(t,function(t,e){n[t]=t,n[e]=t}),e(n);var e,n}var ct,at=ut({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),i=K,lt="__tsUtils$gblCfg";function ft(){var t;return(t=(t=(t=typeof globalThis!==e?globalThis:t)||typeof self===e?t:self)||typeof window===e?t:window)||typeof global===e?t:global}var st,vt="[object Error]";function E(t,e){var n=b,r=G[B][s](t);r===vt&&(t={stack:i(t.stack),message:i(t.message),name:i(t.name)});try{n=(n=JSON.stringify(t,l,e?"number"==typeof e?e:4:a))&&n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: ")||i(t)}catch(t){n=" - "+E(t,e)}return r+": "+n}function dt(e){return function(t){return t[e]}}var _,yt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"},D=n.defineProperty,ht=n.defineProperties;function mt(t,e,n){return D(t,e,(r=n,(o={})[yt.c]=!0,o[yt.e]=!0,r.l&&(o.get=function(){return r.l.v},t=Z(r.l,"v"))&&t.set&&(o.set=function(t){r.l.v=t}),et(r,function(t,e){o[yt[t]]=j(e)?o[yt[t]]:e}),o));var r,o}function k(){var t;ct||(t=A(ft).v||{},ct=t[lt]=t[lt]||{}),_=ct}function pt(e){var n={};return _||k(),n.b=_.lzy,D(n,"v",{configurable:!0,get:function(){var t=e();return _.lzy||D(n,"v",{value:t}),n.b=_.lzy,t}}),n}function O(t){return D({toJSON:function(){return t}},"v",{value:t})}var r,gt="window";function Pt(t,e){var n;return function(){return _||k(),(n=n&&!_.lzy?n:O(A(t,e).v)).v}}function wt(t){return pt(function(){return A(x,[t]).v||a})}function bt(t){return _||k(),(r=r&&!1!==t&&!_.lzy?r:O(A(ft).v||l)).v}function x(t,e){e=r&&!1!==e?r.v:bt(e);return e&&e[t]?e[t]:t===gt?jt():l}var N,St,At=Pt(x,["document"]),jt=Pt(x,[gt]),Rt=Pt(function(){return!!A(function(){return process&&(process.versions||{}).node}).v});function It(){N&&N.b||(N=wt(W))}function $(t,e){var n,r=at[t];return _||k(),N&&!_.lzy||It(),N.v?N.v[r||t]:e?a:(st=st||{},(r=at[t])?st[r]=st[r]||((e={description:i(n=W+"."+r),toString:function(){return W+"("+n+")"}})[H]=!0,e):void 0)}function Tt(t){return t&&R(t.next)}function Et(t){return t!==l&&V(t)&&R(t[$(3)])}function _t(e,t,n){if(e&&(Tt(e)||(e=e[(St=St||O($(3))).v]?e[St.v]():null),Tt(e))){var r=void 0,o=void 0;try{for(var i=0;!(o=e.next()).done&&-1!==t[s](n||e,o.value,i,e);)i++}catch(t){r={e:t},e.throw&&(o=null,e.throw(r))}finally{try{o&&!o.done&&e.return&&e.return(o)}finally{if(r)throw r.e}}}}function Dt(t,e,n){return t.apply(e,n)}function kt(t,e,n){if(t)for(var r=t[L]>>>0,o=0;o<r&&!(o in t&&-1===e[s](n||t,t[o],o,t));o++);}var Ot=function(r){var o=M&&M[r];return function(t){var e,n=t&&t[r]||o;if(n)return e=arguments,(n||void 0).apply(t,n?v[s](e,1):e);T('"'+i(r)+'" not defined for '+E(t))}}("indexOf");function C(t){return(t&&t.slice||v).apply(t,v[s](arguments,1))}var xt,Nt=n.create||function(t){var e;return t?((e=typeof t)!==q&&e!=S&&T("Prototype must be an Object or function: "+E(t)),n[f]=t,new n):{};function n(){}};function $t(t,e){return(n.setPrototypeOf||function(n,t){(xt=xt||pt(function(){return{__proto__:[]}instanceof Array})).v?n[F]=t:et(t,function(t,e){return n[t]=e})})(t,e)}function Ct(t,e){e&&(t[U]=e)}function zt(o,i,t){var e,n,u=t||Error,c=u[f][U],a=Error.captureStackTrace,t=u;return A(mt,[n=function(){var t=this,e=arguments;try{A(Ct,[u,o]);var n,r=Dt(u,t,v[s](e))||t;return r!==t&&(n=it(t))!==it(r)&&$t(r,n),a&&a(r,t[J]),i&&i(r,e),r}finally{A(Ct,[u,c])}},U,{v:e=o,c:!0,e:!1}]),(n=$t(n,t))[f]=t===l?Nt(t):(r[f]=t[f],new r),n;function r(){this.constructor=n,A(mt,[this,U,{v:e,c:!0,e:!1}])}}function m(){return(Date.now||qt)()}function qt(){return(new Date).getTime()}var Ft,p=dt(L),Jt="unref",Wt="hasRef";function Ht(t,e,n){var r,o=!0,i=t?e(l):l;function u(){return o=!1,i&&i[Jt]&&i[Jt](),r}function c(){i&&n(i),i=l}function a(){return i=e(i),o||u(),r}return(r={cancel:c,refresh:a,hasRef:function(){return i&&i[Wt]?i[Wt]():o},ref:function(){return o=!0,i&&i.ref&&i.ref(),r}})[Jt]=u,{h:r=D(r,"enabled",{get:function(){return!!i},set:function(t){!t&&i&&c(),t&&!i&&a()}}),dn:function(){i=l}}}function z(){return t=a,e=v[s](arguments),r=(n=d(t))?t.length:0,o=(0<r?t[0]:n?a:t)||setTimeout,i=(1<r?t[1]:a)||clearTimeout,u=e[0],e[0]=function(){c.dn(),Dt(u,a,v[s](arguments))},(c=Ht(!0,function(t){if(t){if(t.refresh)return t.refresh(),t;Dt(i,a,[t])}return Dt(o,a,e)},function(t){Dt(i,a,[t])})).h;var t,e,n,r,o,i,u,c}var Lt=100,Ut=50;const Bt="Promise",Gt="done",Kt="rejected";function Mt(t,e){return g(t,t=>e?e({status:"fulfilled",rejected:!1,value:t}):t,t=>e?e({status:Kt,rejected:!0,reason:t}):t)}function g(t,e,n,r){let o=t;try{if(I(t))(e||n)&&(o=t.then(e,n));else try{e&&(o=e(t))}catch(t){if(!n)throw t;o=n(t)}}finally{r&&Qt(o,r)}return o}function Qt(t,e){let n=t;return e&&(I(t)?n=t.finally?t.finally(e):t.then(function(t){return e(),t},function(t){throw e(),t}):e()),n}let Vt,Xt,Yt,Zt=!1;const te=["pending","resolving","resolved",Kt],ee="dispatchEvent";let ne;function re(t){return!!(t=t&&t.createEvent?t.createEvent("Event"):void 0)&&t.initEvent}const oe="unhandledRejection",ie=oe.toLowerCase();let ue=[],ce=0,ae=10,le,fe;function se(t){return R(t)?t.toString():E(t)}function ve(t){return new(le=le||O(A(x,["AggregationError"]).v||zt("AggregationError",(t,e)=>{t.errors=e[0]}))).v(t)}function de(t,e,n){let r=C(arguments,3),u=0,c=!1,a,l=[],f=ce++,o=0<ue.length?ue[ue.length-1]:void 0,s=!1,v=null,i;function d(o,i){try{return ue.push(f),s=!0,v&&v.cancel(),v=null,t(function(n,r){l.push(function(){try{var t=2===u?o:i,e=j(t)?a:R(t)?t(a):t;I(e)?e.then(n,r):(t||3!==u?n:r)(e)}catch(t){r(t)}}),c&&h()},r)}finally{ue.pop()}}function y(){return te[u]}function h(){var t;0<l.length&&(t=l.slice(),l=[],s=!0,v&&v.cancel(),v=null,e(t))}function m(e,n){return t=>{u===n&&(2===e&&I(t)?(u=1,t.then(m(2,1),m(3,1))):(u=e,c=!0,a=t,h(),s||3!==e||(v=v||z(p,ae))))}}function p(){var t,e,n,r,o;s||(s=!0,Rt()?process.emit(oe,a,i):(t=jt()||bt(),e=ie,o=t=>(mt(t,"promise",{g:()=>i}),t.reason=a,t),n=!!fe.v,r=At(),o(o=(ne=ne||O(!!A(re,[r]).v)).v?r.createEvent("Event"):n?new Event(e):{}),ne.v&&o.initEvent(e,!1,!0),o&&t[ee]?t[ee](o):(r=t["on"+e])?r(o):(n=x("console"))&&(n.error||n.log)(e,E(o))))}fe=fe||wt(Bt+"RejectionEvent"),i={then:d,catch:function(t){return d(void 0,t)},finally:function(e){let t=e,n=e;return R(e)&&(t=function(t){return e&&e(),t},n=function(t){throw e&&e(),t}),d(t,n)}},D(i,"state",{get:y}),Zt&&(g=i,S=y,P=()=>{return t=a,G.toString.call(t);var t},w=()=>s,Vt=Vt||{toString:()=>"[[PromiseState]]"},Xt=Xt||{toString:()=>"[[PromiseResult]]"},Yt=Yt||{toString:()=>"[[PromiseIsHandled]]"},(b={})[Vt]={get:S},b[Xt]={get:P},b[Yt]={get:w},ht(g,b)),_||k(),N&&!_.lzy||It(),N.v&&(i[$(11)]="IPromise"),i.toString=function(){return"IPromise"+(Zt?"["+f+(j(o)?"":":"+o)+"]":"")+" "+y()+(c?" - "+se(a):"")},R(n)||T(Bt+": executor is not a function - "+se(n));var g,P,w,b,S=m(3,0);try{n.call(i,m(2,0),S)}catch(t){S(t)}return i}function ye(n){return function(t){var e=C(arguments,1);return n((o,i)=>{try{let n=[],r=1;_t(t,(t,e)=>{t&&(r++,g(t,t=>{n[e]=t,0==--r&&o(n)},i))}),0==--r&&o(n)}catch(t){i(t)}},e)}}function he(n){return function(e){var t=C(arguments,1);return I(e)?e:n(t=>{t(e)},t)}}function me(e){return function(n){var t=C(arguments,1);return e((t,e)=>{e(n)},t)}}function pe(e){return O(function(i){var t=C(arguments,1);return e((n,e)=>{let r=[],o=1;function t(t,e){o++,Mt(t,t=>{t.rejected?r[e]={status:Kt,reason:t.reason}:r[e]={status:"fulfilled",value:t.value},0==--o&&n(r)})}try{d(i)?kt(i,t):Et(i)?_t(i,t):T("Input is not an iterable"),0==--o&&n(r)}catch(t){e(t)}},t)})}function ge(e){return O(function(o){var t=C(arguments,1);return e((e,n)=>{let r=!1;function t(t){Mt(t,t=>{r||(r=!0,t.rejected?n(t.reason):e(t.value))})}try{d(o)?kt(o,t):Et(o)?_t(o,t):T("Input is not an iterable")}catch(t){n(t)}},t)})}function Pe(n){return O(function(e){var t=C(arguments,1);return n((n,r)=>{let o=[],i=1,u=!1;function t(t,e){i++,Mt(t,t=>{t.rejected?(o[e]=t.reason,0!=--i||u||r(ve(o))):(u=!0,n(t.value))})}try{d(e)?kt(e,t):Et(e)?_t(e,t):T("Input is not an iterable"),0!=--i||u||r(ve(o))}catch(t){r(t)}},t)})}function we(t){kt(t,t=>{try{t()}catch(t){}})}let be,Se,Ae;function o(t,e){return de(o,function(t){let e=Y(t)?t:0;return t=>{z(()=>{we(t)},e)}}(e),t,e)}var je=ye(o),K=he(o),Re=me(o);function Ie(t,e){return(be=be||pe(o)).v(t,e)}function Te(t,e){return(Se=Se||ge(o)).v(t,e)}function Ee(t,e){return(Ae=Ae||Pe(o)).v(t,e)}let u,_e,De,ke,Oe;function xe(r,t){return(u=u||O(A(x,[Bt]).v||null)).v&&u.v[r]?O(function(n,t){return c((t,e)=>{u.v[r](n).then(t,e)})}):t()}function c(t,e){var n=(u=u||O(A(x,[Bt]).v||null)).v;if(!n)return o(t);R(t)||T(Bt+": executor is not a function - "+E(t));let r=0;n=new n((e,n)=>{t(function(t){r=2,e(t)},function(t){r=3,n(t)})});return D(n,"state",{get:function(){return te[r]}}),n}var Ne=he(c),$e=me(c);let Ce,ze,qe;function y(t){return de(y,we,t)}var Fe=ye(y),Je=he(y),We=me(y);let He,Le,Ue,Be;function Ge(t){He=t}var Ke=Ge;function h(t,e){var n=j(e)?He:e;return de(h,function(){let c;return 0<=n&&(c={timeout:+n}),e=>{var n,r,t,o=t=>{we(e)},i=c;function u(t){var e=m();return{didTimeout:t,timeRemaining:function(){return Ut-(t=e,m()-t);var t}}}Ft||(r=function(){return V(requestIdleCallback)},Ft=pt(function(){var t=A(r);return!t.e&&t.v})),Ft.v&&requestIdleCallback?(n=Ht(!0,function(t){return t&&cancelIdleCallback(t),requestIdleCallback(function(t){n.dn(),o(t||u(!1))},i)},function(t){cancelIdleCallback(t)})).h:z(function(){o(u(!0))},j(t=(i||{}).timeout)?Lt:t)}}(),t,n)}var Me=ye(h),Qe=he(h),Ve=me(h);let Xe,Ye,Ze,tn;function P(t,e){return(Xe=Xe||O(c)).v.call(this,t,e)}var en,nn=ye(P),rn=he(P),on=me(P);function un(t,e,n,r){let o=t;if(e.res=n,!o){if(e.isDone&&R(e.isDone))return g(e.isDone.call(r,e),t=>(e.iter++,!!t));o=!!e.isDone}return e.iter++,o}function cn(n,t,r){let o,i,u=t=>{throw c=!0,t},c=!1,a={st:m(),iter:0,isDone:t||!1};if(n){const l=()=>P((t,e)=>{i=t,u=e}),f=t=>{(c=!!t)?i(a.res):e()},e=()=>{for(;!c;)try{var t=n.call(r,a);if(I(t))return o=o||l(),g(t,t=>{try{g(un(c,a,t,r),f,u)}catch(t){u(t)}},u),o;var e=un(c,a,t,r);if(I(e))return o=o||l(),g(e,f,u),o;c=!!e}catch(t){return u(t),o}return c&&i&&i(a.res),o||a.res};return e()}}let an,ln;const fn="reject",sn="Rejected";let vn=0,dn,yn,hn={};function mn(){}function pn(t,e,n){hn[t]||(hn[t]=zt(t));var r=m();return new hn[t](`Task [${e.id}] ${n||""}- ${e.st?"Running":"Waiting"}: `+(r-(e.st||e.cr)||"0")+" ms")}function gn(t,e){let n=m()-e;kt(t,t=>{(t&&!t.rj&&t.st&&t.st<n||!t.st&&t.cr&&t.cr<n)&&t&&t[fn](t.rj||pn("Aborted",t,"Stale "))})}function Pn(t,e){e=Ot(t,e);-1!==e&&t.splice(e,1)}const wn=$(11);function w(t){this._$=o(t),wn&&(this[wn]="Promise"),D(this,"state",{get:function(){return this._$.state}})}w.all=je,w.race=Te,w.any=Ee,w.reject=Re,w.resolve=K,w.allSettled=Ie,(en=w.prototype).then=function(t,e){return this._$.then(t,e)},en.catch=function(t){return this._$.catch(t)},en.finally=function(t){return this._$.finally(t)},t.PolyPromise=w,t.arrForEachAsync=function(e,n,r){if(e){const o=p(e);if(o)return cn(t=>{t=t.iter;if(t in e)return n.call(r||e,e[t],t,e)},t=>{if(t.iter>=o||-1===t.res)return!0})}},t.createAllPromise=nn,t.createAllSettledPromise=function(t,e){return(Ye=Ye||pe(P)).v(t,e)},t.createAnyPromise=function(t,e){return(tn=tn||Pe(P)).v(t,e)},t.createAsyncAllPromise=je,t.createAsyncAllSettledPromise=Ie,t.createAsyncAnyPromise=Ee,t.createAsyncPromise=o,t.createAsyncRacePromise=Te,t.createAsyncRejectedPromise=Re,t.createAsyncResolvedPromise=K,t.createIdleAllPromise=Me,t.createIdleAllSettledPromise=function(t,e){return(Le=Le||pe(h)).v(t,e)},t.createIdleAnyPromise=function(t,e){return(Be=Be||Pe(h)).v(t,e)},t.createIdlePromise=h,t.createIdleRacePromise=function(t,e){return(Ue=Ue||ge(h)).v(t,e)},t.createIdleRejectedPromise=Ve,t.createIdleResolvedPromise=Qe,t.createNativeAllPromise=function(t,e){return(_e=_e||xe("all",()=>O(ye(c)))).v(t,e)},t.createNativeAllSettledPromise=function(t,e){return(De=De||xe("allSettled",()=>pe(c))).v(t,e)},t.createNativeAnyPromise=function(t,e){return(Oe=Oe||xe("any",()=>Pe(c))).v(t,e)},t.createNativePromise=c,t.createNativeRacePromise=function(t,e){return(ke=ke||xe("race",()=>ge(c))).v(t,e)},t.createNativeRejectedPromise=$e,t.createNativeResolvedPromise=Ne,t.createPromise=P,t.createRacePromise=function(t,e){return(Ze=Ze||ge(P)).v(t,e)},t.createRejectedPromise=on,t.createResolvedPromise=rn,t.createSyncAllPromise=Fe,t.createSyncAllSettledPromise=function(t,e){return(Ce=Ce||pe(y)).v(t,e)},t.createSyncAnyPromise=function(t,e){return(qe=qe||Pe(y)).v(t,e)},t.createSyncPromise=y,t.createSyncRacePromise=function(t,e){return(ze=ze||ge(y)).v(t,e)},t.createSyncRejectedPromise=We,t.createSyncResolvedPromise=Je,t.createTaskScheduler=function(a,t){let l,e=[],f=[],n,r,s=0,v=(t?t+".":"")+vn++,o;a=a||P;const d=()=>{var t=0<p(e)+p(f);0<n&&(o||(o=z(()=>{gn(e,n),gn(f,n),o&&(o.enabled=0<p(e)+p(f))},r)).unref(),o)&&(o.enabled=t)},y=(i,u)=>(i.st=m(),e.push(i),d(),(e,n)=>{const r=t=>{i.rj=i.rj||t||pn(sn,i),i[fn]=mn,c(i),e=null,n&&n(t),n=null};var t=i.id;if(i.rj)r(i.rj);else{i[fn]=r;try{var o=u(t);i.to&&I(o)&&(i.t=z(()=>{r(pn("Timeout",i))},i.to)),g(o,t=>{c(i);try{e&&e(t)}catch(t){n&&n(t)}e=n=null},r)}catch(t){r(t)}}}),c=t=>{Pn(e,t),t.t&&t.t.cancel(),t.t=null,l&&l===t&&(l=null,p(e)+p(f)===0)&&(o&&o.cancel(),o=null)};var i,u,h,t={idle:!0,queue:(t,e,n)=>{let r=v+"."+s++,o=(e&&(r+="-("+e+")"),{id:r,cr:m(),to:n,[fn]:t=>{o.rj=t||pn(sn,o),o[fn]=mn}});var i,u,c;return l?o.p=(i=o,u=l,c=t,f.push(i),d(),a((t,e)=>{Mt(u.p,()=>{Pn(f,i),y(i,c)(t,e)})})):o.p=a(y(o,t)),(l=o).p},setStaleTimeout:(t,e)=>{o&&o.cancel(),o=null,n=t,r=e||t/10,d()}};return mt(t,"idle",{g:()=>p(e)+p(f)===0}),i=t,u=()=>v,h=()=>({l:l,r:e,w:f}),dn=dn||{toString:()=>"[[SchedulerName]]"},yn=yn||{toString:()=>"[[SchedulerState]]"},D(i,dn,{get:u}),D(i,yn,{get:h}),t},t.createTimeoutPromise=function(n,r,o){return P((t,e)=>{z(()=>{(r?t:e)(j(o)?"Timeout of "+n+"ms exceeded":o)},n)})},t.doAwait=g,t.doAwaitResponse=Mt,t.doFinally=Qt,t.doWhileAsync=cn,t.iterForOfAsync=function(t,n,r){let e,o,i=t;function u(t){throw e={e:t},i.throw&&(o=null,i.throw(e)),t}function c(){try{o&&!o[Gt]&&i.return&&i.return(o)}finally{if(e)throw e.e}}if(t&&(Tt(t)||(ln=ln||O($(0)),i=t[ln.v]?t[ln.v]():null)||(an=an||O($(3)),i=t[an.v]?t[an.v]():null),i)&&Tt(i)){let t;try{return t=I(t=cn(e=>g(i.next(),t=>{if(!(o=t)[Gt])return function(t,e){return t.apply(e,v[s](arguments,2))}(n,r||i,o.value,e.iter,i)},t=>{e.isDone=!0,u(t)}),t=>{if(!o||o[Gt]||-1===t.res)return c(),!0},r||i))?Qt(t.catch(u),c):t}catch(t){u(t)}finally{t&&!I(t)&&c()}}},t.setCreatePromiseImpl=function(t){Xe=t?O(t):null},t.setDefaultIdlePromiseTimeout=Ge,t.setDefaultIdleTimeout=Ke,t.setPromiseDebugState=function(t,e){Zt=t}}var e=this;"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).nevware21=e.nevware21||{},e.nevware21["ts-async"]={}));
//# sourceMappingURL=ts-async.min.js.map
